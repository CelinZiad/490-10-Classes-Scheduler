{% extends "base.html" %}

{% block title %}Schedule Display{% endblock %}

{% block content %}
<h1>Generated Schedule</h1>

<div class="card">
  <form method="GET" action="{{ url_for('schedule') }}" style="display:flex; gap:16px; align-items:flex-end; flex-wrap:wrap;">
    <div>
      <label for="planid">Sequence type</label><br>
      <select id="planid" name="planid" onchange="this.form.submit()">
        {% for p in plans %}
          <option value="{{ p.planid }}" {% if p.planid == selected_planid %}selected{% endif %}>
            {{ p.planname }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label for="termid">Semester</label><br>
      <select id="termid" name="termid" onchange="this.form.submit()">
        {% for t in terms %}
          <option value="{{ t.sequencetermid }}" {% if t.sequencetermid == selected_termid %}selected{% endif %}>
            Year {{ t.yearnumber }} {{ t.season|title }}
            {% if t.workterm %}(Work term){% endif %}
          </option>
        {% endfor %}
      </select>
    </div>

    <noscript>
      <button type="submit">Load</button>
    </noscript>
  </form>
</div>

<div class="card">
  {% if courses and courses|length > 0 %}
    <table class="data-table">
      <thead>
        <tr>
          <th>Course</th>
          <th>Label</th>
          <th>Elective</th>
        </tr>
      </thead>
      <tbody>
        {% for c in courses %}
          <tr>
            <td>{{ c.subject }} {{ c.catalog }}</td>
            <td>{{ c.label }}</td>
            <td>{{ 'Yes' if c.iselective else 'No' }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No courses found for this selection.</p>
  {% endif %}
</div>
{% endblock %}
